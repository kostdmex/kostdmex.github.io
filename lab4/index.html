<!DOCTYPE html>
<html>
<body>
<label for="email">Email:</label>
<input type="email" id="email" name="email" placeholder="test@test.com">
<br>
<label for="postalcode">Kod pocztowy:</label>
<input id="postalcode" name="postalcode" pattern="[0-9]{2}-[0-9]{3}" placeholder="99-999">
<br>
<label for="nip">NIP:</label>
<input id="nip" name="nip" pattern="[0-9]{3}-[0-9]{3}-[0-9]{2}-[0-9]{2}" placeholder="123-456-78-12">
<br>
<label for="documentnumber">Numer dowodu osobistego:</label>
<input id="documentnumber" name="documentnumber" pattern="[A-Z]{3}[0-9]{6}" placeholder="ABC123456">
<br>
<label for="ip4">IP4:</label>
<input id="ip4" name="ip4" pattern="(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)_*(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)_*){3}" placeholder="198.255.111.20">
<br>
<label for="www">www(include http://):</label>
<input type="url" id="www" name="www" pattern="https?://.+" placeholder="https://github.com/kostdmex/kostdmex.github.io">
<br>
<label for="diskpathcasesensitive">Ścieżka(małe litery):</label>
<input id="diskpathcasesensitive" name="diskpathcasesensitive" pattern="([a-zA-Z]:\\windows|winnt|win|dos|msdos)(\\[0-9a-z]+)?" placeholder="c:\windows\temp">
<br>
<label for="ip6">IP6:</label>
<input id="ip6" name="ip6" 
	pattern="(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}
	(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)
	|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:
	((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))" 
	placeholder="2001:0db8:0000:0000:0000:0000:1428:57ab">
<br>
<label for="phone">Numer telefonu:</label>
<input type="tel" id="phone" name="phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{3}" placeholder="123-456-789">
<br>
<label for="calendar">Data:</label>
<input type="date" id="calendardate"/>
<br>
<label for="calendarweek">Data z tego tygodnia:</label>
<input type="date" id="calendardateweek" min="2022-10-17" max="2022-10-21"/>
<br>
<label for="appt-time-12h">Godzina(12h): </label>
<input id="appt-time-12h" type="time" name="appt-time-12h" min="0:00" max="12:00"/>
<br>
<label for="appt-time-24h">Godzina(24h): </label>
<input id="appt-time-24h" type="time" name="appt-time-24h"/>
<br>
<label for="color">Kolor: </label>
<input type="color" id="color" value="#ff0000" />
<br>
<button onclick="generateData()">Generuj dane</button>
<div id="indexedDBDiv">
<button onclick="addClient()">Add a client</button>
<button >Clear clients</button>

<p>Clients list:</p>

<ul id="listElem"></ul>
</div>
<script src="https://cdn.jsdelivr.net/npm/idb@3.0.2/build/idb.min.js"></script>
</body>
</html>
<style>
input:valid {
  background-color: rgb(0,255,0);
}

input:not(:focus):not(:placeholder-shown):invalid {
  background-color: rgb(255,0,0);
}
#color {
	background-color: rgb(255,255,255);
}
#indexedDBDiv{
	margin-top: 1em;
}
</style>
<script>
	function generateData(){
		document.getElementById("email").value="testemail@gmail.com";
		document.getElementById("postalcode").value="11-234";
		document.getElementById("nip").value="123-456-12-23";
		document.getElementById("documentnumber").value="DEF127932";
		document.getElementById("ip4").value="192.125.221.123";
		document.getElementById("www").value="http:\/\/www.google.com";
		document.getElementById("diskpathcasesensitive").value="C:\\windows";
		document.getElementById("ip6").value="2001:0db8:0000:0000:0000:0000:1428:57ab";
		document.getElementById("phone").value="346-125-743";
		document.getElementById("calendardate").value="2022-12-24";
		document.getElementById("calendardateweek").value="2022-10-19";
		document.getElementById("appt-time-12h").value="08:00";
		document.getElementById("appt-time-24h").value="20:00";
		document.getElementById("color").value="#00ff00";
	}
	let db;

	init();

	async function init() {
	  db = await idb.openDb('clientsDb', 1, db => {
		db.createObjectStore('clients', {keyPath: 'name'});
	  });

	  list();
	}
	
	async function list() {
	  let tx = db.transaction('clients');
	  let clientStore = tx.objectStore('clients');

	  let clients = await clientStore.getAll();

	  if (clients.length) {
		listElem.innerHTML = clients.map(client => `<li>
        name: ${client.name}, phone: ${client.phone}
      </li>`).join('');
	  } else {
		listElem.innerHTML = '<li>No clients yet. Please add new client.</li>'
	  }
	}
	async function addClient() {
	  let name = prompt("Enter client name:");
	  let phone = +prompt("Enter client phone:");

	  let tx = db.transaction('clients', 'readwrite');

	  try {
		await tx.objectStore('clients').add({name, phone});
		await list();
	  } catch(err) {
		if (err.name == 'ConstraintError') {
		  alert("Such client exists already");
		  await addClient();
		} else {
		  throw err;
		}
	  }
	}
</script>
